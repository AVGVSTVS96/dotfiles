# Nushell Setup

## Quick Start

```bash
# Stow nushell config
cd ~/dotfiles
stow nushell

# Generate autoload files (not stowed - local/generated)
mkdir -p ~/.config/nushell/autoload
nu -c 'zoxide init nushell | save -f ~/.config/nushell/autoload/zoxide.nu'
```

## Structure

```
~/.config/nushell/
├── config.nu          # symlink → dotfiles (stowed)
├── env.nu             # symlink → dotfiles (stowed)
├── autoload/          # local, not stowed
│   └── zoxide.nu      # generated
└── history.txt        # local
```

## Autoload Directory

Nushell automatically sources all `.nu` files in `~/.config/nushell/autoload/` at startup (after config.nu). This is the recommended place for generated tool configs.

**Why not stow autoload files?**
- They're generated by tools (`zoxide init`, etc.)
- May need regeneration after tool updates
- Machine-specific

## Regenerating Autoload Files

```bash
# Zoxide
nu -c 'zoxide init nushell | save -f ~/.config/nushell/autoload/zoxide.nu'
```

## Config Overview

**env.nu** handles:
- SOPS secrets decryption (loads API keys from `~/dotfiles/zsh/secrets.env`)
- Environment variables (EDITOR, BAT_THEME, etc.)
- PATH setup using `use std/util "path add"`

**config.nu** handles:
- Oh-my-posh prompt
- Aliases (git, tools)
- Custom commands (gcl, mk)
